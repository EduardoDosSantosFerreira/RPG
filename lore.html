<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Legend of Asterya — Lore e Histórias</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Cinzel:wght@400;700;900&family=UnifrakturMaguntia&family=Cormorant+Garamond:wght@300;400;500;600&family=Eagle+Lake&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gold: #d4af37;
            --dark-gold: #b8860b;
            --blood-red: #8b0000;
            --deep-red: #5a0000;
            --aged-parchment: #f5e9d4;
            --aged-dark: #3a2c1e;
            --shadow-dark: #0a0806;
            --ash-gray: #8a8886;
            --moss-green: #556b2f;
            --twilight-blue: #1e3a5f;
            --ancient-bronze: #cd7f32;
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            background-color: #000000;
            color: var(--aged-parchment);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
            font-weight: 400;
            line-height: 1.7;
        }

        /* Efeitos de fundo atmosféricos */
        .background-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 20% 30%, rgba(26, 10, 5, 0.8) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(30, 20, 10, 0.6) 0%, transparent 40%),
                linear-gradient(180deg,
                    #000000 0%,
                    #0f0804 20%,
                    #1a0f0a 40%,
                    #0f0804 70%,
                    #000000 100%);
            z-index: -3;
            overflow: hidden;
        }

        /* Neblina flutuante */
        .mist-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 30% 20%, rgba(150, 150, 150, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(100, 100, 100, 0.02) 0%, transparent 50%);
            z-index: -2;
            pointer-events: none;
            animation: mist-drift 60s infinite linear;
        }

        @keyframes mist-drift {
            0% {
                transform: translateX(0) translateY(0);
            }

            25% {
                transform: translateX(-20px) translateY(10px);
            }

            50% {
                transform: translateX(10px) translateY(-20px);
            }

            75% {
                transform: translateX(-10px) translateY(15px);
            }

            100% {
                transform: translateX(0) translateY(0);
            }
        }

        /* Estrelas cadentes */
        .shooting-stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
            animation: star-twinkle 5s infinite alternate;
        }

        @keyframes star-twinkle {

            0%,
            100% {
                opacity: 0.3;
            }

            50% {
                opacity: 1;
            }
        }

        .shooting-star {
            position: absolute;
            width: 2px;
            height: 100px;
            background: linear-gradient(to bottom, transparent, rgba(212, 175, 55, 0.8));
            transform: rotate(-45deg);
            opacity: 0;
        }

        /* Novos efeitos: Poeira cósmica */
        .cosmic-dust {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
        }

        .dust-particle {
            position: absolute;
            background: radial-gradient(circle, rgba(212, 175, 55, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            animation: dust-float linear infinite;
        }

        @keyframes dust-float {
            0% {
                transform: translateY(100vh) translateX(0) rotate(0deg);
                opacity: 0;
            }

            10% {
                opacity: 0.2;
            }

            90% {
                opacity: 0.2;
            }

            100% {
                transform: translateY(-100px) translateX(calc(var(--x-move) * 100px)) rotate(360deg);
                opacity: 0;
            }
        }

        /* Efeitos de brilho suave */
        .glow-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            pointer-events: none;
            background: radial-gradient(circle at 30% 40%,
                    rgba(212, 175, 55, 0.05) 0%,
                    transparent 50%),
                radial-gradient(circle at 70% 60%,
                    rgba(139, 0, 0, 0.04) 0%,
                    transparent 50%);
            animation: glow-pulse 8s infinite alternate;
        }

        @keyframes glow-pulse {
            0% {
                opacity: 0.3;
            }

            100% {
                opacity: 0.7;
            }
        }

        /* Header de navegação */
        .nav-header {
            padding: 1.5rem 3rem;
            background: linear-gradient(to bottom,
                    rgba(10, 5, 2, 0.95),
                    rgba(5, 2, 1, 0.85));
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            position: relative;
            backdrop-filter: blur(5px);
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(to right,
                    transparent,
                    rgba(212, 175, 55, 0.3),
                    rgba(212, 175, 55, 0.6),
                    rgba(212, 175, 55, 0.3),
                    transparent);
        }

        .logo {
            font-family: 'UnifrakturMaguntia', cursive;
            font-size: 2.5rem;
            color: var(--primary-gold);
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
            letter-spacing: 2px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .logo:hover {
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.8);
            transform: scale(1.05);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-link {
            font-family: 'Cinzel', serif;
            color: var(--aged-parchment);
            text-decoration: none;
            font-size: 1.1rem;
            letter-spacing: 1px;
            padding: 0.5rem 1rem;
            border-bottom: 1px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }

        .nav-link:hover {
            color: var(--primary-gold);
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 1px;
            background: var(--primary-gold);
            transition: width 0.3s ease;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-link.active {
            color: var(--primary-gold);
        }

        .nav-link.active::after {
            width: 100%;
        }

        /* Tela principal */
        .screen {
            min-height: calc(100vh - 120px);
            padding: 2rem;
            position: relative;
            z-index: 1;
        }

        /* Título majestoso */
        .page-title {
            font-family: 'UnifrakturMaguntia', cursive;
            font-size: 5rem;
            color: var(--primary-gold);
            text-align: center;
            margin-bottom: 1.5rem;
            text-shadow:
                0 0 20px rgba(212, 175, 55, 0.7),
                0 0 40px rgba(139, 0, 0, 0.5),
                3px 3px 0px var(--deep-red);
            letter-spacing: 3px;
            position: relative;
            padding-bottom: 1.5rem;
            opacity: 0;
            animation: title-fade-in 2s forwards 0.5s;
        }

        .page-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 2px;
            background: linear-gradient(to right, transparent, var(--primary-gold), transparent);
        }

        @keyframes title-fade-in {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .page-subtitle {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            color: rgba(212, 175, 55, 0.8);
            text-align: center;
            margin-bottom: 3rem;
            font-style: italic;
            opacity: 0;
            animation: subtitle-fade-in 2s forwards 1s;
        }

        @keyframes subtitle-fade-in {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        /* Container principal */
        .lore-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 3rem;
            position: relative;
            z-index: 2;
        }

        @media (max-width: 1100px) {
            .lore-container {
                grid-template-columns: 1fr;
            }
        }

        /* Conteúdo principal */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 3rem;
        }

        /* Seções de lore */
        .lore-section {
            background:
                linear-gradient(145deg,
                    rgba(20, 10, 5, 0.7),
                    rgba(10, 5, 2, 0.8));
            border: 1px solid rgba(139, 0, 0, 0.3);
            padding: 2.5rem;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(5px);
            opacity: 0;
            transform: translateY(30px);
            animation: section-fade-in 1.5s forwards;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.4s ease;
        }

        .lore-section:hover {
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.2);
            border-color: rgba(212, 175, 55, 0.5);
        }

        .lore-section:nth-child(1) {
            animation-delay: 1.5s;
        }

        .lore-section:nth-child(2) {
            animation-delay: 2s;
        }

        .lore-section:nth-child(3) {
            animation-delay: 2.5s;
        }

        @keyframes section-fade-in {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .lore-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg,
                    transparent 30%,
                    rgba(212, 175, 55, 0.03) 50%,
                    transparent 70%);
            z-index: 1;
            pointer-events: none;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }

        .section-title {
            font-family: 'Cinzel', serif;
            font-size: 2.2rem;
            color: var(--primary-gold);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
            letter-spacing: 1px;
        }

        .section-icon {
            font-size: 2rem;
            color: rgba(212, 175, 55, 0.7);
        }

        .lore-text {
            font-size: 1.2rem;
            line-height: 1.8;
            color: rgba(245, 233, 212, 0.9);
            text-align: justify;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
            margin-bottom: 1.5rem;
        }

        .lore-text.highlight {
            background: rgba(212, 175, 55, 0.1);
            border-left: 3px solid var(--primary-gold);
            padding: 1.5rem;
            margin: 1.5rem 0;
            font-style: italic;
            font-size: 1.3rem;
            position: relative;
            overflow: hidden;
        }

        .lore-text.highlight::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg,
                    transparent 30%,
                    rgba(212, 175, 55, 0.05) 50%,
                    transparent 70%);
            z-index: 1;
            pointer-events: none;
        }

        .lore-quote {
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            color: rgba(192, 160, 80, 0.9);
            text-align: center;
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-top: 1px solid rgba(212, 175, 55, 0.2);
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            font-style: italic;
            position: relative;
        }

        .lore-quote::before,
        .lore-quote::after {
            content: '"';
            font-size: 2rem;
            color: rgba(212, 175, 55, 0.5);
            position: absolute;
        }

        .lore-quote::before {
            top: 5px;
            left: 10px;
        }

        .lore-quote::after {
            bottom: 5px;
            right: 10px;
        }

        /* Barra lateral */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 2rem;
            position: sticky;
            top: 2rem;
            height: fit-content;
        }

        /* Mapa do mundo aprimorado */
        .world-map {
            background:
                linear-gradient(145deg,
                    rgba(15, 7, 3, 0.8),
                    rgba(10, 5, 2, 0.9));
            border: 1px solid rgba(212, 175, 55, 0.3);
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.4s ease;
        }

        .world-map:hover {
            border-color: var(--primary-gold);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.2);
        }

        .map-title {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            color: var(--primary-gold);
            text-align: center;
            margin-bottom: 1.5rem;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .map-container {
            height: 300px;
            border: 1px solid rgba(139, 69, 19, 0.5);
            position: relative;
            overflow: hidden;
            background: #000;
            cursor: crosshair;
            transition: all 0.3s ease;
        }

        .map-container:hover {
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
        }

        .map-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .map-container:hover .map-image {
            transform: scale(1.02);
        }

        /* Pontos do mapa aprimorados */
        .map-point {
            position: absolute;
            width: 14px;
            height: 14px;
            background: var(--primary-gold);
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.8);
            cursor: pointer;
            z-index: 2;
            transition: all 0.3s ease;
            border: 2px solid var(--aged-dark);
        }

        .map-point:hover {
            transform: scale(1.5);
            box-shadow: 0 0 25px rgba(212, 175, 55, 1);
        }

        .map-point::after {
            content: attr(data-location);
            position: absolute;
            top: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(10, 5, 2, 0.95);
            color: var(--primary-gold);
            padding: 0.5rem 1rem;
            font-family: 'Cinzel', serif;
            font-size: 0.9rem;
            white-space: nowrap;
            border: 1px solid var(--primary-gold);
            border-radius: 3px;
            z-index: 3;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .map-point:hover::after {
            opacity: 1;
        }

        /* Efeito de pulso nos pontos */
        .map-point::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 24px;
            height: 24px;
            border: 1px solid var(--primary-gold);
            border-radius: 50%;
            opacity: 0;
            animation: point-pulse 2s infinite;
        }

        @keyframes point-pulse {
            0% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.8;
            }

            100% {
                transform: translate(-50%, -50%) scale(2);
                opacity: 0;
            }
        }

        /* Cartões de segredos aprimorados */
        .secret-card {
            background:
                linear-gradient(145deg,
                    rgba(15, 7, 3, 0.8),
                    rgba(10, 5, 2, 0.9));
            border: 1px solid rgba(212, 175, 55, 0.3);
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.4s ease;
            cursor: pointer;
        }

        .secret-card:hover {
            border-color: var(--primary-gold);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.2);
        }

        .secret-card.hidden {
            background:
                linear-gradient(145deg,
                    rgba(10, 5, 2, 0.9),
                    rgba(5, 2, 1, 0.95));
        }

        .secret-card.revealed {
            border-color: var(--primary-gold);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.3);
        }

        .secret-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .secret-icon {
            font-size: 1.5rem;
            color: var(--primary-gold);
            transition: all 0.3s ease;
        }

        .secret-card:hover .secret-icon {
            transform: rotate(15deg);
        }

        .secret-title {
            font-family: 'Cinzel', serif;
            font-size: 1.2rem;
            color: var(--primary-gold);
            letter-spacing: 1px;
        }

        .secret-content {
            font-size: 1rem;
            line-height: 1.6;
            color: rgba(245, 233, 212, 0.8);
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .secret-content.revealed {
            max-height: 500px;
        }

        .secret-content.hidden-text {
            color: rgba(245, 233, 212, 0.5);
            font-style: italic;
            text-align: center;
            padding: 1rem;
        }

        /* Efeito de brilho nas bordas dos cards */
        .secret-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg,
                    transparent 30%,
                    rgba(212, 175, 55, 0.1) 50%,
                    transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.8s ease;
            z-index: 1;
            pointer-events: none;
        }

        .secret-card:hover::before {
            transform: translateX(100%);
        }

        /* Timeline aprimorada */
        .timeline {
            background:
                linear-gradient(145deg,
                    rgba(15, 7, 3, 0.8),
                    rgba(10, 5, 2, 0.9));
            border: 1px solid rgba(212, 175, 55, 0.3);
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .timeline-title {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            color: var(--primary-gold);
            text-align: center;
            margin-bottom: 1.5rem;
            letter-spacing: 1px;
        }

        .timeline-item {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
            position: relative;
            padding-left: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeline-item:hover {
            transform: translateX(5px);
        }

        .timeline-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 5px;
            width: 12px;
            height: 12px;
            background: var(--primary-gold);
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(212, 175, 55, 0.8);
            transition: all 0.3s ease;
        }

        .timeline-item:hover::before {
            transform: scale(1.3);
            box-shadow: 0 0 15px rgba(212, 175, 55, 1);
        }

        .timeline-year {
            font-family: 'MedievalSharp', cursive;
            font-size: 1.1rem;
            color: var(--primary-gold);
            margin-bottom: 0.3rem;
        }

        .timeline-event {
            font-size: 1rem;
            color: rgba(245, 233, 212, 0.8);
            line-height: 1.5;
        }

        /* Glossário aprimorado */
        .glossary {
            background:
                linear-gradient(145deg,
                    rgba(15, 7, 3, 0.8),
                    rgba(10, 5, 2, 0.9));
            border: 1px solid rgba(212, 175, 55, 0.3);
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .glossary-title {
            font-family: 'Cinzel', serif;
            font-size: 1.5rem;
            color: var(--primary-gold);
            text-align: center;
            margin-bottom: 1.5rem;
            letter-spacing: 1px;
        }

        .glossary-term {
            margin-bottom: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0.5rem;
            border-radius: 3px;
            position: relative;
        }

        .glossary-term:hover {
            background: rgba(212, 175, 55, 0.1);
            transform: translateX(5px);
        }

        .term-name {
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            color: var(--primary-gold);
            margin-bottom: 0.3rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .term-name::before {
            content: '✦';
            color: var(--primary-gold);
            font-size: 0.8rem;
            transition: transform 0.3s ease;
        }

        .glossary-term:hover .term-name::before {
            transform: rotate(90deg);
        }

        .term-definition {
            font-size: 1rem;
            color: rgba(245, 233, 212, 0.8);
            line-height: 1.5;
            padding-left: 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .term-definition.expanded {
            max-height: 200px;
            margin-top: 0.5rem;
        }

        /* Efeitos de transição de página */
        .page-transition {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            z-index: 1000;
            pointer-events: none;
            opacity: 0;
            animation: page-transition-out 1.5s forwards;
        }

        @keyframes page-transition-out {
            0% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        /* Novo: Modal de informações do mapa */
        .map-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(5, 2, 1, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s ease;
            backdrop-filter: blur(10px);
        }

        .map-modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .map-modal-content {
            background: linear-gradient(145deg,
                    rgba(20, 10, 5, 0.98),
                    rgba(10, 5, 2, 0.98));
            border: 2px solid var(--primary-gold);
            padding: 2.5rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 0 50px rgba(212, 175, 55, 0.5);
            position: relative;
            transform: scale(0.9);
            transition: transform 0.5s ease;
        }

        .map-modal-overlay.active .map-modal-content {
            transform: scale(1);
        }

        .map-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
        }

        .map-modal-title {
            font-family: 'Cinzel', serif;
            font-size: 2rem;
            color: var(--primary-gold);
            letter-spacing: 1px;
        }

        .map-modal-close {
            background: none;
            border: none;
            color: var(--primary-gold);
            font-size: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .map-modal-close:hover {
            transform: rotate(90deg);
        }

        .map-modal-body {
            font-size: 1.1rem;
            line-height: 1.7;
            color: var(--aged-parchment);
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .nav-header {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                gap: 1rem;
                flex-wrap: wrap;
                justify-content: center;
            }

            .page-title {
                font-size: 3.5rem;
            }

            .screen {
                padding: 1rem;
            }

            .lore-section {
                padding: 1.5rem;
            }

            .section-title {
                font-size: 1.8rem;
            }

            .lore-text {
                font-size: 1.1rem;
            }

            .map-container {
                height: 250px;
            }
        }

        /* Estilos do lightbox simples para a imagem do mapa */
        .image-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            cursor: zoom-out;
        }

        .image-overlay img {
            max-width: 90%;
            max-height: 90%;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
            border: 4px solid rgba(212, 175, 55, 0.12);
            object-fit: contain;
        }
    </style>
</head>

<body>
    <!-- Efeitos de fundo -->
    <div class="background-effect"></div>
    <div class="mist-overlay"></div>
    <div class="shooting-stars" id="shootingStars"></div>
    <div class="cosmic-dust" id="cosmicDust"></div>
    <div class="glow-effect"></div>
    <div class="page-transition"></div>

    <!-- Modal do mapa (informações) -->
    <div class="map-modal-overlay" id="mapModal">
        <div class="map-modal-content">
            <div class="map-modal-header">
                <h3 class="map-modal-title" id="modalLocationTitle">Localização</h3>
                <button class="map-modal-close" id="modalCloseBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="map-modal-body" id="modalLocationContent">
                <!-- Conteúdo será preenchido via JavaScript -->
            </div>
        </div>
    </div>

    <!-- Header de navegação -->
    <header class="nav-header">
        <div class="logo">ASTERYA</div>
        <nav class="nav-links">
            <a href="#" class="nav-link active">Lore</a>
            <a href="#" class="nav-link">Personagens</a>
            <a href="#" class="nav-link">Mapa</a>
            <a href="#" class="nav-link">História</a>
            <a href="#" class="nav-link">Bestiário</a>
        </nav>
    </header>

    <!-- Tela principal -->
    <main class="screen">
        <h1 class="page-title">As Crônicas de Asterya</h1>
        <div class="page-subtitle">Um mundo em ruínas, histórias não contadas e segredos enterrados nas cinzas</div>

        <div class="lore-container">
            <!-- Conteúdo principal -->
            <div class="main-content">
                <!-- Seção 1: O Mundo -->
                <section class="lore-section">
                    <div class="section-header">
                        <h2 class="section-title">O Mundo em Cinzas</h2>
                        <div class="section-icon"><i class="fas fa-globe-americas"></i></div>
                    </div>

                    <p class="lore-text">
                        Asterya não é apenas um reino; é um cadáver de civilizações passadas, uma tapeçaria de ruínas
                        onde cada pedra carrega o peso de milênios. As terras que antes floresciam sob o Sol Eterno
                        agora repousam sob um céu perpetuamente crepuscular, onde a luz do dia nunca é totalmente clara
                        e a noite nunca é completamente escura.
                    </p>

                    <p class="lore-text">
                        A Grande Purificação não foi apenas uma guerra; foi um evento cataclísmico que reescreveu a
                        geografia do mundo. Montanhas foram niveladas, mares evaporaram, florestas petrificaram. O que
                        restou são fragmentos desconexos de um todo que já foi glorioso, conectados apenas por estradas
                        esquecidas e túneis subterrâneos que ecoam com murmúrios de eras passadas.
                    </p>

                    <div class="lore-text highlight">
                        "O último raio de sol desapareceu há três séculos, mas ainda o buscamos em cada fagulha, em cada
                        brasa, em cada olhar perdido no horizonte cinza." — Crônicas dos Devotos do Sol
                    </div>

                    <p class="lore-text">
                        As estações perderam seu significado. Agora, Asterya conhece apenas três estados: o Crepúsculo
                        Perpétuo das terras centrais, o Inverno Eterno das montanhas do norte, e as Tempestades de
                        Cinzas dos desertos orientais. Cada região desenvolveu sua própria cultura de sobrevivência,
                        seus próprios mitos sobre o que causou a queda, e suas próprias profecias sobre o que pode vir a
                        seguir.
                    </p>
                </section>

                <!-- Seção 2: A Queda -->
                <section class="lore-section">
                    <div class="section-header">
                        <h2 class="section-title">A Queda e o Silêncio</h2>
                        <div class="section-icon"><i class="fas fa-skull-crossbones"></i></div>
                    </div>

                    <p class="lore-text">
                        Nenhum registro sobreviveu intacto da Grande Purificação. O que sabemos é fragmentado,
                        contraditório e, muitas vezes, mais mito do que história. Alguns dizem que foi uma guerra entre
                        deuses, outros que foi um experimento arcano que fugiu ao controle, e alguns sussurram sobre
                        algo muito mais antigo despertando de seu sono milenar.
                    </p>

                    <p class="lore-text">
                        O que é certo é que algo fundamental foi quebrado. As leis da realidade tornaram-se flexíveis
                        nas bordas do mundo. Magia, uma vez uma ciência refinada, agora é uma força selvagem e
                        imprevisível. Tempo e espaço se dobram em locais de poder antigo. E em algumas noites, quando a
                        névoa está particularmente espessa, dizem que é possível ver sombras das construções que
                        existiam antes da Queda, fantasmas arquitetônicos de uma era perdida.
                    </p>

                    <div class="lore-quote">
                        A primeira coisa que perdemos foi a certeza. A segunda foi a memória. A terceira foi a
                        esperança. Restou apenas a sobrevivência, e mesmo essa é questionável.
                    </div>

                    <p class="lore-text">
                        Os poucos centros de civilização que restam são como ilhas em um oceano de ruínas. Drangleic,
                        com suas vielas labirínticas e hierarquias secretas. Lorian, onde os estudiosos do arcanismo
                        sussurram verdades que podem destruir mentes. Os Santuários do Sol, últimos bastiões de fé em um
                        mundo que parece ter sido abandonado pelos deuses. Cada um destes lugares guarda seus segredos,
                        suas histórias não contadas, e suas próprias versões da verdade.
                    </p>
                </section>

                <!-- Seção 3: Os Segredos -->
                <section class="lore-section">
                    <div class="section-header">
                        <h2 class="section-title">Verdades Sussurradas</h2>
                        <div class="section-icon"><i class="fas fa-eye-slash"></i></div>
                    </div>

                    <p class="lore-text">
                        Em Asterya, a verdade é uma mercadoria mais valiosa que o ouro e mais perigosa que qualquer
                        lâmina. Existem histórias que não são contadas em voz alta, conhecimentos que são transmitidos
                        apenas através de sussurros codificados, segredos que são guardados a custo de vidas.
                    </p>

                    <p class="lore-text">
                        Dizem que as ruínas não estão realmente vazias. Que algo observa dos lugares escuros, algo que
                        se alimenta não de carne, mas de memória e tempo. Que os ecos que se ouvem nas criptas antigas
                        não são apenas o vento, mas vozes de uma era passada, ainda presas ao mundo que as abandonou.
                    </p>

                    <div class="lore-text highlight">
                        Existem três verdades em Asterya: a que é dita, a que é escrita, e a que é silenciada. Apenas a
                        última importa, e conhecer pode ser uma sentença de morte.
                    </div>

                    <p class="lore-text">
                        Alguns buscam ativamente estes segredos: os Arcanos das Sombras, que acreditam que o
                        conhecimento proibido é a chave para restaurar o mundo. Os Devotos do Sol, que procuram
                        relíquias sagradas para reacender a Chama Primordial. Os Ladinos do Crepúsculo, que vendem
                        informações para quem paga mais. Mas para cada segredo descoberto, dez outros permanecem
                        enterrados, e alguns são melhor deixados assim.
                    </p>

                    <p class="lore-text">
                        O maior segredo de todos, é claro, é o que acontecerá a seguir. Asterya está morrendo, isso é
                        evidente. Mas há aqueles que acreditam que este não é um fim, mas uma transformação. Que das
                        cinzas do mundo antigo, algo novo está para nascer. Algo diferente. Algo que talvez não devesse
                        nascer.
                    </p>
                </section>
            </div>

            <!-- Barra lateral -->
            <div class="sidebar">
                <!-- Mapa do mundo aprimorado -->
                <div class="world-map">
                    <h3 class="map-title">
                        <i class="fas fa-map-marked-alt"></i> Mapa de Asterya
                    </h3>
                    <div class="map-container" id="mapContainer">
                        <img src="img/cenarios/mapa.png" alt="Mapa de Asterya" class="map-image" id="mapImage">

                        <!-- Pontos de interesse (posições aproximadas) -->
                        <div class="map-point" id="pointDrangleic" data-location="Drangleic"
                            style="top: 65%; left: 25%;" data-type="city"></div>
                        <div class="map-point" id="pointLorian" data-location="Lorian" style="top: 40%; left: 70%;"
                            data-type="academy"></div>
                        <div class="map-point" id="pointAsterya" data-location="Asterya Central"
                            style="top: 50%; left: 45%;" data-type="ruins"></div>
                        <div class="map-point" id="pointNorthlands" data-location="Terras do Norte"
                            style="top: 20%; left: 50%;" data-type="region"></div>
                        <div class="map-point" id="pointForest" data-location="Florestas Ancestrais"
                            style="top: 75%; left: 60%;" data-type="forest"></div>
                        <div class="map-point" id="pointSunSanctuary" data-location="Santuários do Sol"
                            style="top: 55%; left: 30%;" data-type="temple"></div>
                        <div class="map-point" id="pointAshenWastes" data-location="Desertos de Cinza"
                            style="top: 35%; left: 15%;" data-type="wasteland"></div>
                    </div>
                </div>

                <!-- Segredos aprimorados -->
                <div class="secret-card hidden" id="secret1">
                    <div class="secret-header">
                        <div class="secret-icon"><i class="fas fa-lock"></i></div>
                        <h4 class="secret-title">Segredo dos Sussurros</h4>
                    </div>
                    <div class="secret-content hidden-text">
                        Clique para revelar um segredo de Asterya...
                    </div>
                </div>

                <div class="secret-card hidden" id="secret2">
                    <div class="secret-header">
                        <div class="secret-icon"><i class="fas fa-lock"></i></div>
                        <h4 class="secret-title">A Profecia Esquecida</h4>
                    </div>
                    <div class="secret-content hidden-text">
                        Clique para revelar um segredo de Asterya...
                    </div>
                </div>

                <div class="secret-card hidden" id="secret3">
                    <div class="secret-header">
                        <div class="secret-icon"><i class="fas fa-lock"></i></div>
                        <h4 class="secret-title">Verdade sobre a Purificação</h4>
                    </div>
                    <div class="secret-content hidden-text">
                        Clique para revelar um segredo de Asterya...
                    </div>
                </div>

                <!-- Timeline aprimorada -->
                <div class="timeline">
                    <h3 class="timeline-title">Linha do Tempo</h3>

                    <div class="timeline-item" data-year="-3000">
                        <div class="timeline-year">Era do Sol Eterno</div>
                        <div class="timeline-event">Asterya floresce sob a luz perpétua</div>
                    </div>

                    <div class="timeline-item" data-year="-500">
                        <div class="timeline-year">O Primeiro Crepúsculo</div>
                        <div class="timeline-event">O Sol começa a enfraquecer, pânico se espalha</div>
                    </div>

                    <div class="timeline-item" data-year="0">
                        <div class="timeline-year">A Grande Purificação</div>
                        <div class="timeline-event">Evento cataclísmico, 90% da população perece</div>
                    </div>

                    <div class="timeline-item" data-year="100">
                        <div class="timeline-year">Era das Cinzas</div>
                        <div class="timeline-event">Sobreviventes se agrupam, novas facções surgem</div>
                    </div>

                    <div class="timeline-item" data-year="300">
                        <div class="timeline-year">Tempo Presente</div>
                        <div class="timeline-event">O mundo está à beira de uma nova transformação</div>
                    </div>
                </div>

                <!-- Glossário aprimorado -->
                <div class="glossary">
                    <h3 class="glossary-title">Glossário</h3>

                    <div class="glossary-term" data-term="purificacao">
                        <div class="term-name">A Grande Purificação</div>
                        <div class="term-definition">Evento catastrófico que dizimou a civilização de Asterya. Sua
                            verdadeira natureza é desconhecida e controversa. Alguns acreditam que foi um ritual arcano,
                            outros uma guerra divina.</div>
                    </div>

                    <div class="glossary-term" data-term="crepusculo">
                        <div class="term-name">Crepúsculo Perpétuo</div>
                        <div class="term-definition">Estado atual do céu de Asterya, nem dia completo nem noite total,
                            apenas um eterno pôr-do-sol. A luz solar nunca mais foi vista após a Purificação.</div>
                    </div>

                    <div class="glossary-term" data-term="chama">
                        <div class="term-name">Chama Primordial</div>
                        <div class="term-definition">Fonte de luz e calor antes da Purificação. Os Devotos do Sol buscam
                            reacendê-la em seus santuários, acreditando que isso pode restaurar o mundo.</div>
                    </div>

                    <div class="glossary-term" data-term="arcano">
                        <div class="term-name">Arcanismo Proibido</div>
                        <div class="term-definition">Forma de magia que manipula realidades fundamentais, perigosa e
                            instável. Estudo restrito à cidade de Lorian, onde estudiosos arriscam suas mentes por
                            conhecimento.</div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Estado da aplicação (removido controle de zoom do mapa)
        const appState = {
            revealedSecrets: new Set(),
            activeModal: null,
            lastClickedPoint: null
        };

        // Dados das localizações
        const locationData = {
            'Drangleic': {
                title: 'Drangleic',
                description: 'Cidade-estado nas sombras, governada por guildas secretas e ladrões. Sobrevive através de comércio ilícito e informações roubadas. As ruas são labirintos intencionais, projetados para confundir invasores e proteger os segredos das famílias nobres que realmente controlam a cidade.',
                type: 'Cidade',
                population: 'Aprox. 15.000',
                faction: 'Guilda dos Ladrões',
                status: 'Ativa',
                dangers: 'Alto - Assassinos, traições, labirintos urbanos'
            },
            'Lorian': {
                title: 'Lorian',
                description: 'Último bastião do conhecimento arcano. Suas torres abrigam estudiosos que buscam entender (e talvez reverter) a Queda. A Biblioteca Proibida contém textos que podem destruir mentes não preparadas. Muitos que entram nas torres de Lorian nunca mais são vistos, ou retornam irremediavelmente alterados.',
                type: 'Academia Arcana',
                population: 'Aprox. 5.000 (estudiosos e servos)',
                faction: 'Conselho Arcano',
                status: 'Isolada',
                dangers: 'Extremo - Magia instável, conhecimento corruptor'
            },
            'Asterya Central': {
                title: 'Asterya Central',
                description: 'O coração do antigo império, agora uma vasta planície de cinzas e ruínas. Dizem que algo dorme sob as ruínas - talvez os restos dos governantes do antigo império, ou algo que eles tentaram conter. Expedições raramente retornam, e os que voltam falam de sussurros e sombras que se movem.',
                type: 'Ruínas Imperiais',
                population: 'Nenhuma (oficialmente)',
                faction: 'Nenhuma',
                status: 'Amaldiçoada',
                dangers: 'Desconhecido - Assombrações, anomalias temporais'
            },
            'Terras do Norte': {
                title: 'Terras do Norte',
                description: 'Região de inverno eterno, lar das tribos bárbaras que abraçaram a fúria como religião. Aqui, a força física e a resistência são veneradas acima de tudo. As tribos lutam constantemente entre si, mas se unem contra ameaças externas. Dizem que nas cavernas mais profundas dormem bestas da era glacial.',
                type: 'Região Selvagem',
                population: 'Tribos nômades',
                faction: 'Tribos Bárbaras',
                status: 'Hostil',
                dangers: 'Alto - Clima extremo, bestas pré-históricas, tribos hostis'
            },
            'Florestas Ancestrais': {
                title: 'Florestas Ancestrais',
                description: 'Último remanescente da natureza pré-Purificação. A floresta está viva de uma maneira que as árvores não deveriam estar. Elas se movem, sussurram e às vezes atacam. Os Caçadores da Floresta aprenderam a navegar por estes perigos, mas mesmo eles sabem que a floresta apenas tolera sua presença.',
                type: 'Floresta Antiga',
                population: 'Caçadores e ermitões',
                faction: 'Caçadores da Floresta',
                status: 'Ativa (e consciente)',
                dangers: 'Moderado-Alto - Flora hostil, criaturas antigas'
            },
            'Santuários do Sol': {
                title: 'Santuários do Sol',
                description: 'Últimos bastiões de fé em um mundo abandonado pelos deuses. Os Devotos mantêm chamas sagradas acesas, esperando um dia reacender a Chama Primordial. Cada santuário é uma fortaleza isolada, protegendo relíquias sagradas e conhecimentos antigos sobre o mundo antes da Queda.',
                type: 'Complexo Religioso',
                population: 'Devotos e peregrinos',
                faction: 'Devotos do Sol',
                status: 'Defensiva',
                dangers: 'Moderado - Fanáticos, relíquias perigosas'
            },
            'Desertos de Cinza': {
                title: 'Desertos de Cinza',
                description: 'Vastas extensões de cinzas e poeira radioativa, restos das terras férteis que antes existiam aqui. Tempestades de cinzas varrem a paisagem regularmente, enterrando qualquer coisa que ouse se estabelecer. Ainda assim, algumas facções arriscam a extração de cristais arcanos que se formaram após a Purificação.',
                type: 'Deserto Tóxico',
                population: 'Nômades e mineradores',
                faction: 'Vários clãs',
                status: 'Inóspita',
                dangers: 'Extremo - Radiação, tempestades de cinza, criaturas mutantes'
            }
        };

        // Segredos
        const secretsData = [
            {
                id: 'secret1',
                title: 'Segredo dos Sussurros',
                content: 'Os sussurros que ecoam nas ruínas não são apenas o vento. São memórias presas, fragmentos de consciências que não conseguiram partir quando Asterya caiu. Alguns estudiosos acreditam que é possível comunicar-se com elas, mas o preço é um pedaço da própria sanidade. O ritual requer sangue da linhagem real extinta e é realizado apenas durante o Eclipse das Almas, uma vez a cada século.'
            },
            {
                id: 'secret2',
                title: 'A Profecia Esquecida',
                content: 'Antes da Queda, os Videntes de Lorian previram que "do coração da escuridão, uma nova luz nascerá, mas seu brilho será pior que a escuridão que veio antes". A profecia foi suprimida pelas autoridades, e todos os registros foram destruídos. Exceto um - uma tabuleta de obsidiana enterrada sob a Grande Biblioteca. Ela detalha não apenas a queda, mas sete sinais que precederão o "Segundo Despertar". Três desses sinais já ocorreram.'
            },
            {
                id: 'secret3',
                title: 'Verdade sobre a Purificação',
                content: 'A Grande Purificação não foi um acidente ou um ato divino. Foi um ritual deliberado realizado por um culto que acreditava que destruir o mundo era a única maneira de salvá-lo de algo muito pior. Os Arquitetas do Vazio descobriram uma entidade adormecida no núcleo de Asterya - um ser que se alimentava da própria realidade. Eles calcularam que um cataclismo controlado seria menos devastador que seu despertar. Eles podem ter tido razão, pois a entidade ainda dorme... por enquanto.'
            }
        ];

        // Inicialização
        document.addEventListener('DOMContentLoaded', () => {
            initStars();
            initShootingStars();
            initCosmicDust();
            setupSecretCards();
            setupGlossary();
            setupMapPoints();
            setupMapClickToEnlarge(); // nova função simples de clique para ampliar
            setupTimeline();
            startAmbientSounds();
            setupNavigation();
        });

        // Criar estrelas de fundo
        function initStars() {
            const container = document.getElementById('shootingStars');

            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 5 + 's';
                star.style.animationDuration = Math.random() * 3 + 3 + 's';
                container.appendChild(star);
            }
        }

        // Criar estrelas cadentes
        function initShootingStars() {
            const container = document.getElementById('shootingStars');

            function createShootingStar() {
                const star = document.createElement('div');
                star.className = 'shooting-star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 50 + '%';

                container.appendChild(star);

                // Animação
                star.animate([
                    { transform: 'translateY(0) translateX(0)', opacity: 0 },
                    { transform: `translateY(${Math.random() * 200 + 100}px) translateX(${Math.random() * 100 - 50}px)`, opacity: 1 },
                    { transform: `translateY(${Math.random() * 400 + 200}px) translateX(${Math.random() * 200 - 100}px)`, opacity: 0 }
                ], {
                    duration: Math.random() * 2000 + 1000,
                    easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
                });

                // Remover após animação
                setTimeout(() => {
                    if (star.parentNode) {
                        star.parentNode.removeChild(star);
                    }
                }, 3000);
            }

            // Criar estrelas cadentes em intervalos
            setInterval(createShootingStar, 3000);

            // Criar algumas no início
            for (let i = 0; i < 5; i++) {
                setTimeout(createShootingStar, i * 800);
            }
        }

        // Criar poeira cósmica
        function initCosmicDust() {
            const container = document.getElementById('cosmicDust');
            for (let i = 0; i < 40; i++) {
                const dust = document.createElement('div');
                dust.className = 'dust-particle';
                dust.style.setProperty('--x-move', Math.random() * 2 - 1);
                dust.style.width = Math.random() * 6 + 2 + 'px';
                dust.style.height = dust.style.width;
                dust.style.left = Math.random() * 100 + '%';
                dust.style.animationDuration = Math.random() * 20 + 30 + 's';
                dust.style.animationDelay = Math.random() * 10 + 's';
                container.appendChild(dust);
            }
        }

        // Configurar cartões de segredos
        function setupSecretCards() {
            secretsData.forEach(secret => {
                const card = document.getElementById(secret.id);
                if (!card) return;

                card.addEventListener('click', () => {
                    const content = card.querySelector('.secret-content');

                    if (content.classList.contains('revealed')) {
                        content.classList.remove('revealed');
                        content.innerHTML = 'Clique para revelar um segredo de Asterya...';
                        card.classList.add('hidden');
                        card.classList.remove('revealed');
                        appState.revealedSecrets.delete(secret.id);
                    } else {
                        content.classList.add('revealed');
                        content.innerHTML = secret.content;
                        card.classList.remove('hidden');
                        card.classList.add('revealed');
                        appState.revealedSecrets.add(secret.id);

                        // Efeito visual
                        playSecretEffect(card);
                    }
                });
            });
        }

        // Efeito para revelação de segredo
        function playSecretEffect(card) {
            // Criar partículas de brilho
            for (let i = 0; i < 15; i++) {
                createGlowParticle(card);
            }

            // Efeito de brilho
            const glow = document.createElement('div');
            glow.style.position = 'absolute';
            glow.style.top = '0';
            glow.style.left = '0';
            glow.style.width = '100%';
            glow.style.height = '100%';
            glow.style.background = 'radial-gradient(circle, rgba(212, 175, 55, 0.3) 0%, transparent 70%)';
            glow.style.zIndex = '1';
            glow.style.pointerEvents = 'none';
            glow.style.opacity = '0';
            glow.style.animation = 'glowFade 1s ease-out';

            // Adicionar estilo para animação
            const style = document.createElement('style');
            style.textContent = `
                @keyframes glowFade {
                    0% { opacity: 1; }
                    100% { opacity: 0; }
                }
            `;
            document.head.appendChild(style);

            card.appendChild(glow);

            setTimeout(() => {
                if (glow.parentNode) {
                    glow.parentNode.removeChild(glow);
                }
                document.head.removeChild(style);
            }, 1000);
        }

        // Criar partícula de brilho
        function createGlowParticle(card) {
            const particle = document.createElement('div');
            particle.style.position = 'absolute';
            particle.style.width = '5px';
            particle.style.height = '5px';
            particle.style.background = 'radial-gradient(circle, #d4af37 0%, transparent 70%)';
            particle.style.borderRadius = '50%';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.top = Math.random() * 100 + '%';
            particle.style.zIndex = '2';
            particle.style.pointerEvents = 'none';

            card.appendChild(particle);

            // Animação
            particle.animate([
                { transform: 'translate(0, 0) scale(1)', opacity: 1 },
                { transform: `translate(${Math.random() * 100 - 50}px, ${Math.random() * 100 - 50}px) scale(0)`, opacity: 0 }
            ], {
                duration: 1000,
                easing: 'cubic-bezier(0.215, 0.610, 0.355, 1)'
            });

            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, 1000);
        }

        // Configurar glossário
        function setupGlossary() {
            const terms = document.querySelectorAll('.glossary-term');

            terms.forEach(term => {
                term.addEventListener('click', () => {
                    const definition = term.querySelector('.term-definition');

                    if (definition.classList.contains('expanded')) {
                        definition.classList.remove('expanded');
                    } else {
                        // Fechar outras definições
                        terms.forEach(t => {
                            t.querySelector('.term-definition').classList.remove('expanded');
                        });

                        definition.classList.add('expanded');
                    }
                });
            });
        }

        // Configurar pontos do mapa
        function setupMapPoints() {
            const points = document.querySelectorAll('.map-point');

            points.forEach(point => {
                point.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const location = point.getAttribute('data-location');
                    showLocationModal(location);
                    appState.lastClickedPoint = point.id;

                    // Efeito visual
                    point.style.animation = 'none';
                    setTimeout(() => {
                        point.style.animation = 'point-pulse 2s infinite';
                    }, 10);
                });
            });
        }

        // Nova função: clique na imagem para ampliar (lightbox simples)
        function setupMapClickToEnlarge() {
            const mapImage = document.getElementById('mapImage');
            if (!mapImage) return;

            mapImage.style.cursor = 'zoom-in';
            mapImage.addEventListener('click', () => {
                const overlay = document.createElement('div');
                overlay.className = 'image-overlay';
                const img = document.createElement('img');
                img.src = mapImage.src;
                img.alt = mapImage.alt || 'Mapa de Asterya';
                overlay.appendChild(img);

                // clicar no overlay fecha
                overlay.addEventListener('click', () => {
                    if (overlay.parentNode) overlay.parentNode.removeChild(overlay);
                });

                document.body.appendChild(overlay);
            });
        }

        // Configurar timeline
        function setupTimeline() {
            const timelineItems = document.querySelectorAll('.timeline-item');

            timelineItems.forEach(item => {
                item.addEventListener('click', () => {
                    const year = item.getAttribute('data-year');
                    const eventText = item.querySelector('.timeline-event').textContent;

                    showTimelineModal(year, eventText);
                });
            });
        }

        // Mostrar modal de localização
        function showLocationModal(location) {
            const data = locationData[location];
            if (!data) return;

            const modal = document.getElementById('mapModal');
            const title = document.getElementById('modalLocationTitle');
            const content = document.getElementById('modalLocationContent');

            // Definir ícone baseado no tipo
            const typeIcon = getTypeIcon(data.type);

            title.textContent = data.title;
            content.innerHTML = `
                <div style="margin-bottom: 1.5rem;">
                    <p>${data.description}</p>
                </div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-top: 1.5rem;">
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 0.8rem; border-left: 3px solid var(--primary-gold);">
                        <div style="font-size: 0.9rem; color: var(--primary-gold); margin-bottom: 0.3rem;">Tipo</div>
                        <div style="font-size: 1rem; color: var(--aged-parchment);">
                            <i class="${typeIcon}" style="margin-right: 0.5rem;"></i>${data.type}
                        </div>
                    </div>
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 0.8rem; border-left: 3px solid var(--primary-gold);">
                        <div style="font-size: 0.9rem; color: var(--primary-gold); margin-bottom: 0.3rem;">População</div>
                        <div style="font-size: 1rem; color: var(--aged-parchment);">${data.population}</div>
                    </div>
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 0.8rem; border-left: 3px solid var(--primary-gold);">
                        <div style="font-size: 0.9rem; color: var(--primary-gold); margin-bottom: 0.3rem;">Facção</div>
                        <div style="font-size: 1rem; color: var(--aged-parchment);">${data.faction}</div>
                    </div>
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 0.8rem; border-left: 3px solid var(--primary-gold);">
                        <div style="font-size: 0.9rem; color: var(--primary-gold); margin-bottom: 0.3rem;">Status</div>
                        <div style="font-size: 1rem; color: var(--aged-parchment);">${data.status}</div>
                    </div>
                </div>
                <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(139, 0, 0, 0.1); border-left: 3px solid var(--blood-red);">
                    <div style="font-size: 0.9rem; color: var(--blood-red); margin-bottom: 0.3rem;">
                        <i class="fas fa-skull-crossbones"></i> Nível de Perigo
                    </div>
                    <div style="font-size: 1rem; color: var(--aged-parchment);">${data.dangers}</div>
                </div>
            `;

            modal.classList.add('active');
            appState.activeModal = 'location';

            // Configurar botão de fechar
            const closeBtn = document.getElementById('modalCloseBtn');
            closeBtn.onclick = () => {
                modal.classList.remove('active');
                appState.activeModal = null;
            };

            // Fechar ao clicar fora
            modal.onclick = (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    appState.activeModal = null;
                }
            };
        }

        // Mostrar modal da timeline
        function showTimelineModal(year, event) {
            const modal = document.getElementById('mapModal');
            const title = document.getElementById('modalLocationTitle');
            const content = document.getElementById('modalLocationContent');

            const era = year < 0 ? 'Antes da Purificação' : 'Após a Purificação';
            const absoluteYear = Math.abs(year);

            title.textContent = `Ano ${absoluteYear} ${era}`;
            content.innerHTML = `
                <div style="margin-bottom: 1.5rem;">
                    <p style="font-size: 1.2rem; color: var(--primary-gold); margin-bottom: 1rem;">${event}</p>
                    <p>Este evento marcou um ponto crucial na história de Asterya. Os registros desta época são fragmentados e muitas vezes contraditórios, mas historiadores concordam que foi um período de transformação fundamental para o mundo.</p>
                </div>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-top: 1.5rem;">
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 0.8rem; border-left: 3px solid var(--primary-gold);">
                        <div style="font-size: 0.9rem; color: var(--primary-gold); margin-bottom: 0.3rem;">Período</div>
                        <div style="font-size: 1rem; color: var(--aged-parchment);">${era}</div>
                    </div>
                    <div style="background: rgba(212, 175, 55, 0.1); padding: 0.8rem; border-left: 3px solid var(--primary-gold);">
                        <div style="font-size: 0.9rem; color: var(--primary-gold); margin-bottom: 0.3rem;">Impacto</div>
                        <div style="font-size: 1rem; color: var(--aged-parchment);">
                            ${year == 0 ? 'Cataclísmico' : year < 0 ? 'Significativo' : 'Moderado'}
                        </div>
                    </div>
                </div>
                <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(30, 58, 95, 0.1); border-left: 3px solid var(--twilight-blue);">
                    <div style="font-size: 0.9rem; color: var(--twilight-blue); margin-bottom: 0.3rem;">
                        <i class="fas fa-scroll"></i> Registros Sobreviventes
                    </div>
                    <div style="font-size: 1rem; color: var(--aged-parchment);">
                        ${year == 0 ? 'Fragmentados e contraditórios' :
                    year < -500 ? 'Míticos e lendários' :
                        'Parcialmente preservados'}
                    </div>
                </div>
            `;

            modal.classList.add('active');
            appState.activeModal = 'timeline';

            // Configurar botão de fechar
            const closeBtn = document.getElementById('modalCloseBtn');
            closeBtn.onclick = () => {
                modal.classList.remove('active');
                appState.activeModal = null;
            };

            // Fechar ao clicar fora
            modal.onclick = (e) => {
                if (e.target === modal) {
                    modal.classList.remove('active');
                    appState.activeModal = null;
                }
            };
        }

        // Obter ícone baseado no tipo
        function getTypeIcon(type) {
            switch (type.toLowerCase()) {
                case 'cidade': return 'fas fa-city';
                case 'academia': return 'fas fa-university';
                case 'ruínas': return 'fas fa-monument';
                case 'região': return 'fas fa-mountain';
                case 'floresta': return 'fas fa-tree';
                case 'templo': return 'fas fa-place-of-worship';
                case 'wasteland': return 'fas fa-water';
                default: return 'fas fa-map-marker-alt';
            }
        }

        // Configurar navegação
        function setupNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();

                    // Remover classe active de todos os links
                    navLinks.forEach(l => l.classList.remove('active'));

                    // Adicionar classe active ao link clicado
                    link.classList.add('active');

                    // Simular navegação
                    simulateNavigation(link.textContent);
                });
            });
        }

        // Simular navegação
        function simulateNavigation(page) {
            // Em um site real, aqui carregaria o conteúdo da página
            console.log(`Navegando para: ${page}`);

            // Efeito visual de transição
            const transition = document.createElement('div');
            transition.style.position = 'fixed';
            transition.style.top = '0';
            transition.style.left = '0';
            transition.style.width = '100%';
            transition.style.height = '100%';
            transition.style.background = '#000';
            transition.style.zIndex = '9999';
            transition.style.opacity = '0';
            transition.style.transition = 'opacity 0.5s ease';
            transition.style.pointerEvents = 'none';

            document.body.appendChild(transition);

            // Animação
            setTimeout(() => {
                transition.style.opacity = '1';
            }, 10);

            setTimeout(() => {
                transition.style.opacity = '0';
            }, 500);

            setTimeout(() => {
                document.body.removeChild(transition);
            }, 1000);
        }

        // Sons ambientes (simulado)
        function startAmbientSounds() {
            // Em um ambiente real, aqui iniciaria uma trilha sonora atmosférica
            console.log('Iniciando atmosfera sonora melancólica...');
        }

        // Efeito de digitação para textos (opcional)
        function typeWriterEffect(element, text, speed = 50) {
            let i = 0;
            element.innerHTML = '';

            function type() {
                if (i < text.length) {
                    element.innerHTML += text.charAt(i);
                    i++;
                    setTimeout(type, speed);
                }
            }

            type();
        }

        // Inicializar efeito de digitação na primeira seção
        setTimeout(() => {
            const firstParagraph = document.querySelector('.lore-text');
            if (firstParagraph) {
                const originalText = firstParagraph.textContent;
                typeWriterEffect(firstParagraph, originalText, 30);
            }
        }, 2000);

        // Adicionar efeito de parallax ao scroll
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const mist = document.querySelector('.mist-overlay');
            const stars = document.querySelector('.shooting-stars');

            if (mist) {
                mist.style.transform = `translateY(${scrolled * 0.1}px)`;
            }

            if (stars) {
                stars.style.transform = `translateY(${scrolled * 0.05}px)`;
            }
        });
    </script>
</body>

</html>